"""
Management command для додавання FAQ з сайту speak-up.com.ua.
Використання: python manage.py add_faq_from_site
"""
from django.core.management.base import BaseCommand
from apps.core.models import FAQ


class Command(BaseCommand):
    help = 'Додає FAQ з сайту speak-up.com.ua'

    def handle(self, *args, **options):
        # FAQ з сайту speak-up.com.ua
        # Відповіді базуються на загальній інформації з сайту
        FAQ_DATA = [
            {
                'question_uk': 'Як довго триває урок?',
                'question_ru': 'Как долго длится урок?',
                'answer_uk': 'Тривалість уроку залежить від обраної програми навчання. Зазвичай заняття тривають від 45 хвилин до 1,5 години. Детальну інформацію про тривалість занять для конкретної програми можна отримати у нашого консультанта.',
                'answer_ru': 'Продолжительность урока зависит от выбранной программы обучения. Обычно занятия длятся от 45 минут до 1,5 часа. Подробную информацию о продолжительности занятий для конкретной программы можно получить у нашего консультанта.',
                'order': 13
            },
            {
                'question_uk': 'Як присвоюють графік занять?',
                'question_ru': 'Как назначают расписание занятий?',
                'answer_uk': 'У Speak Up ви самі формуєте розклад занять на тиждень. Ви можете обрати зручний для вас час та самостійно формувати розклад своїх занять, включаючи заняття з викладачами та індивідуальні консультації. Гнучкий графік дозволить вам займатися в зручний час.',
                'answer_ru': 'В Speak Up вы сами формируете расписание занятий на неделю. Вы можете выбрать удобное для вас время и самостоятельно формировать расписание своих занятий, включая занятия с преподавателями и индивидуальные консультации. Гибкий график позволит вам заниматься в удобное время.',
                'order': 14
            },
            {
                'question_uk': 'Скільки людей навчаються в групі?',
                'question_ru': 'Сколько людей обучается в группе?',
                'answer_uk': 'У Speak Up маленькі групи від 2 до 10 осіб. Це забезпечує індивідуальний підхід до кожного студента та можливість активної практики спілкування. Невелике наповнення груп дозволяє викладачу приділити увагу кожному студенту.',
                'answer_ru': 'В Speak Up маленькие группы от 2 до 10 человек. Это обеспечивает индивидуальный подход к каждому студенту и возможность активной практики общения. Небольшое наполнение групп позволяет преподавателю уделить внимание каждому студенту.',
                'order': 15
            },
            {
                'question_uk': 'Як почати навчатися?',
                'question_ru': 'Как начать обучаться?',
                'answer_uk': 'Щоб почати навчання в Speak Up, вам не потрібно чекати закінчення набору в групу - можна почати навчання в будь-який день! Заповніть форму на нашому сайті або зателефонуйте нам, і наші консультанти допоможуть вам обрати оптимальну програму та розпочати навчання.',
                'answer_ru': 'Чтобы начать обучение в Speak Up, вам не нужно ждать окончания набора в группу - можно начать обучение в любой день! Заполните форму на нашем сайте или позвоните нам, и наши консультанты помогут вам выбрать оптимальную программу и начать обучение.',
                'order': 16
            },
            {
                'question_uk': 'Як і в якому форматі видається домашнє завдання?',
                'question_ru': 'Как и в каком формате выдается домашнее задание?',
                'answer_uk': 'Домашнє завдання видається в електронному форматі через нашу платформу навчання. Ви матимете доступ до завдань 24/7, зможете виконувати їх у зручний час та отримувати зворотний зв\'язок від викладачів. Всі матеріали доступні онлайн.',
                'answer_ru': 'Домашнее задание выдается в электронном формате через нашу платформу обучения. Вы будете иметь доступ к заданиям 24/7, сможете выполнять их в удобное время и получать обратную связь от преподавателей. Все материалы доступны онлайн.',
                'order': 17
            },
            {
                'question_uk': 'Чому вам варто обрати школу англійської SpeakUP?',
                'question_ru': 'Почему вам стоит выбрать школу английского SpeakUP?',
                'answer_uk': 'Speak Up - це міжнародна школа з 18-річним досвідом роботи в Україні. Ми пропонуємо гнучкий графік, маленькі групи, висококваліфікованих викладачів та унікальну методику навчання. Ми даємо письмову гарантію результату та маємо понад 500 тисяч задоволених студентів по всьому світу.',
                'answer_ru': 'Speak Up - это международная школа с 18-летним опытом работы в Украине. Мы предлагаем гибкий график, маленькие группы, высококвалифицированных преподавателей и уникальную методику обучения. Мы даем письменную гарантию результата и имеем более 500 тысяч довольных студентов по всему миру.',
                'order': 18
            },
            {
                'question_uk': 'Що робити якщо не можеш під\'єднатися до уроку через технічні неполадки?',
                'question_ru': 'Что делать если не можешь подключиться к уроку из-за технических неполадок?',
                'answer_uk': 'Якщо у вас виникли технічні проблеми під час підключення до уроку, негайно зверніться до служби підтримки Speak Up. Наші фахівці допоможуть вирішити проблему. Ви також можете відпрацювати пропущене заняття в зручний для вас час - вам не доведеться платити за пропущені уроки.',
                'answer_ru': 'Если у вас возникли технические проблемы во время подключения к уроку, немедленно обратитесь в службу поддержки Speak Up. Наши специалисты помогут решить проблему. Вы также можете отработать пропущенное занятие в удобное для вас время - вам не придется платить за пропущенные уроки.',
                'order': 19
            },
            {
                'question_uk': 'Як звернутися до служби підтримки SpeakUP?',
                'question_ru': 'Как обратиться в службу поддержки SpeakUP?',
                'answer_uk': 'Ви можете звернутися до служби підтримки Speak Up зателефонувавши на гарячу лінію +38 (093) 170-78-67 або написавши нам на email. Наші консультанти працюють Пн-Пт: 10:00-21:30, Сб: 11:00-15:00. Ми завжди готові допомогти вам з будь-якими питаннями.',
                'answer_ru': 'Вы можете обратиться в службу поддержки Speak Up позвонив на горячую линию +38 (093) 170-78-67 или написав нам на email. Наши консультанты работают Пн-Пт: 10:00-21:30, Сб: 11:00-15:00. Мы всегда готовы помочь вам с любыми вопросами.',
                'order': 20
            },
        ]

        self.stdout.write('Додавання FAQ з сайту speak-up.com.ua...\n')

        created_count = 0
        skipped_count = 0

        for data in FAQ_DATA:
            # Перевіряємо чи не існує вже таке питання
            existing = FAQ.objects.filter(
                question_uk__iexact=data['question_uk']
            ).first()

            if existing:
                skipped_count += 1
                self.stdout.write(
                    self.style.WARNING(f'⊘ Пропущено (вже існує): {data["question_uk"]}')
                )
                continue

            faq = FAQ.objects.create(
                question_uk=data['question_uk'],
                question_ru=data.get('question_ru', ''),
                answer_uk=data['answer_uk'],
                answer_ru=data.get('answer_ru', ''),
                order=data['order'],
                is_active=True
            )

            created_count += 1
            self.stdout.write(
                self.style.SUCCESS(f'✓ Створено: {faq.question_uk}')
            )

        self.stdout.write(
            self.style.SUCCESS(
                f'\nГотово! Створено: {created_count}, пропущено: {skipped_count}'
            )
        )
        self.stdout.write(
            f'Всього активних FAQ: {FAQ.objects.filter(is_active=True).count()}'
        )


