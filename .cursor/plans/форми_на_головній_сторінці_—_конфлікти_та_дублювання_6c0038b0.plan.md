---
name: Форми на головній сторінці — об'єднання без дублювання
overview: "Залишити всі форми, кнопки та повідомлення. Видалити тільки дублювання та конфлікти. Об'єднати налаштування - по 1 параметру без дублювання. Без створення нового коду - тільки об'єднати існуюче."
todos:
  - id: remove-duplicate-attr
    content: Видалити дублюючий атрибут data-submit-url з trial-form.html (залишити тільки action)
    status: pending
  - id: add-action-header-form
    content: Додати action="{% url 'leads:submit_trial_form' %}" до форми в хедері (data-header-dynamic-form)
    status: pending
  - id: add-action-mobile-form
    content: Додати action="{% url 'leads:submit_trial_form' %}" до модальної форми (data-trial-form-mobile)
    status: pending
  - id: unify-form-inputs-header
    content: Об'єднати інпути форми в хедері - використати існуючий компонент trial-form.html з класом trial-form--header
    status: pending
  - id: unify-form-inputs-mobile
    content: Об'єднати інпути модальної форми - використати існуючий компонент trial-form.html з класом trial-form--mobile
    status: pending
  - id: remove-unused-css-classes
    content: Видалити невикористовувані CSS класи .trial-form--desktop з header-base.css, navigation.css, trial-form.css
    status: pending
  - id: check-css-conflicts
    content: Перевірити та видалити конфліктуючі CSS правила для форм (переконатися що немає !important дублювання)
    status: pending
---

# План об'єднання форм без дублювання та конфліктів

## Завдання: Залишити всі форми, кнопки, повідомлення. Видалити тільки дублювання та конфлікти.

### 1. Видалити дублюючий атрибут

**Файл:** `templates/components/trial-form.html:1`

**Зміна:** Видалити `data-submit-url="{% url 'leads:submit_trial_form' %}"`

**Причина:** Дублюється з атрибутом `action`, достатньо одного.

---

### 2. Додати action до форми в хедері

**Файл:** `templates/components/header.html:36-62`

**Зміна:** Додати `action="{% url 'leads:submit_trial_form' %}"` до тегу `<form>`

**Причина:** Форма не має action, тому не працює. Використати той самий endpoint що й Hero форма.

---

### 3. Додати action до модальної форми

**Файл:** `templates/components/header.html:98-109`

**Зміна:** Додати `action="{% url 'leads:submit_trial_form' %}"` до тегу `<form>`

**Причина:** Форма не має action, тому не працює. Використати той самий endpoint що й Hero форма.

---

### 4. Об'єднати інпути форми в хедері з існуючим компонентом

**Файл:** `templates/components/header.html:35-62`

**Зміна:** Замінити hardcoded інпути на `{% include 'components/trial-form.html' with form=trial_form %}` (якщо trial_form доступна через context processor, або створити окремий компонент trial-form-header.html що використовує існуючу структуру)

**Альтернатива (якщо trial_form недоступна в header):**
- Залишити структуру інпутів, але додати action (вже зроблено в пункті 2)
- Або додати trial_form до глобального context processor (але це "новий код")

**Причина:** Використовувати одну і ту саму Django форму для валідації замість hardcoded інпутів.

---

### 5. Об'єднати інпути модальної форми з існуючим компонентом

**Файл:** `templates/components/header.html:98-109`

**Зміна:** Замінити hardcoded інпути на `{% include 'components/trial-form.html' with form=trial_form %}` з модифікатором класу для модальної форми

**Альтернатива:** Залишити структуру інпутів, але додати action (вже зроблено в пункті 3)

**Причина:** Використовувати одну і ту саму Django форму для валідації замість hardcoded інпутів.

---

### 6. Видалити невикористовувані CSS класи

**Файли:**
- `static/css/components/header-base.css` - видалити стилі для `.trial-form--desktop` (рядки 147-265)
- `static/css/components/navigation.css` - видалити стилі для `.trial-form--desktop` (рядок 319)
- `static/css/components/trial-form.css` - видалити стилі для `.trial-form--desktop` (рядок 17)

**Причина:** Клас `.trial-form--desktop` не використовується в HTML шаблонах (пошук не знайшов використання).

---

### 7. Перевірити та видалити конфліктуючі CSS правила

**Файли для перевірки:**
- `static/css/components/trial-form.css`
- `static/css/components/header-dynamic-form.css`
- `static/css/components/header-base.css`

**Зміна:**
- Перевірити чи немає дублювання правил для `.trial-form` та `[data-header-dynamic-form]`
- Перевірити чи немає конфліктуючих `!important` правил
- Об'єднати спільні стилі якщо можливо

**Причина:** Уникати конфліктів між різними CSS файлами для форм.

---

## Результат після об'єднання

1. **Всі форми залишаються:**
   - Hero форма (`trial-form.html`) - працює
   - Форма в хедері (`data-header-dynamic-form`) - буде працювати з action
   - Модальна форма (`data-trial-form-mobile`) - буде працювати з action

2. **Всі кнопки залишаються:**
   - Кнопка "Детальніше" (`data-header-expand`) - залишається
   - Кнопка мобільної форми (`trial-form__trigger--mobile`) - залишається
   - Всі кнопки submit - залишаються

3. **Всі повідомлення залишаються:**
   - `data-header-success` - залишається

4. **Об'єднано:**
   - Один endpoint для всіх форм: `leads:submit_trial_form`
   - Одна Django форма: `TrialLessonForm` (використовується в Hero, потрібно додати в header та mobile)
   - Один атрибут action (без дублювання data-submit-url)
   - Очищені CSS класи (видалено невикористовувані `.trial-form--desktop`)

5. **Видалено дублювання:**
   - `data-submit-url` (залишено тільки `action`)
   - Невикористовувані CSS класи `.trial-form--desktop`

