{% extends "base.html" %}
{% load static %}

{% block title %}–ë–µ–∑–∫–æ—à—Ç–æ–≤–Ω–∏–π —Ç–µ—Å—Ç —Ä—ñ–≤–Ω—è –∞–Ω–≥–ª—ñ–π—Å—å–∫–æ—ó –º–æ–≤–∏ - SPEAK UP{% endblock %}
{% block og_title %}–ë–µ–∑–∫–æ—à—Ç–æ–≤–Ω–∏–π —Ç–µ—Å—Ç —Ä—ñ–≤–Ω—è –∞–Ω–≥–ª—ñ–π—Å—å–∫–æ—ó –º–æ–≤–∏ - SPEAK UP{% endblock %}
{% block meta_description %}–ü—Ä–æ–π–¥—ñ—Ç—å –±–µ–∑–∫–æ—à—Ç–æ–≤–Ω–∏–π –æ–Ω–ª–∞–π–Ω-—Ç–µ—Å—Ç –¥–ª—è –≤–∏–∑–Ω–∞—á–µ–Ω–Ω—è —Ä—ñ–≤–Ω—è –∞–Ω–≥–ª—ñ–π—Å—å–∫–æ—ó –º–æ–≤–∏. 15-20 —Ö–≤–∏–ª–∏–Ω, —Ä–µ–∑—É–ª—å—Ç–∞—Ç –æ–¥—Ä–∞–∑—É. –û—Ç—Ä–∏–º–∞–π—Ç–µ –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω–∏–π –ø–ª–∞–Ω –Ω–∞–≤—á–∞–Ω–Ω—è.{% endblock %}

{% block extra_css %}
<link href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;600;700;800&display=swap" rel="stylesheet">
<link rel="stylesheet" href="{% static 'css/components/testing.css' %}">
{% endblock %}

{% block content %}
<div id="app" class="testing-page">
  <!-- Header -->
  <div class="testing-container testing-hero">
    <h1 id="gameTitle" class="testing-hero__title">üá¨üáß –¢–µ—Å—Ç –Ω–∞ —Ä—ñ–≤–µ–Ω—å –∞–Ω–≥–ª—ñ–π—Å—å–∫–æ—ó</h1>
    <p id="stageLabel" class="testing-hero__subtitle">–ï—Ç–∞–ø 1 –∑ 3</p>

    <!-- Overall Progress Bar -->
    <div class="testing-progress-container">
      <div id="overallProgress" class="testing-progress-fill"></div>
    </div>

    <!-- Stage Progress -->
    <div class="testing-progress-info">
      <span id="stageInfo">ü§ö –ü–µ—Ä—à–∏–π –±–ª–æ–∫ —Å–ª—ñ–≤</span>
      <span>–ó–∞–≥–∞–ª—å–Ω–∏–π –±–∞–ª: <span id="totalScore">0</span></span>
    </div>
  </div>

  <!-- Stage 1: Honest Word Selection (First Set) -->
  <div id="stage1" class="testing-container">
    <div class="testing-card slide-in">
      <div class="testing-card__header">
        <div class="testing-card__emoji">ü§ö</div>
        <h2 class="testing-card__title">–û–±—ñ—Ü—è–π –≤—ñ–¥–ø–æ–≤—ñ–¥–∞—Ç–∏ —á–µ—Å–Ω–æ!</h2>
        <p class="testing-card__subtitle">–û–±–µ—Ä–∏ –¢–Ü–õ–¨–ö–ò —Ç—ñ —Å–ª–æ–≤–∞, –ø–µ—Ä–µ–∫–ª–∞–¥ —è–∫–∏—Ö —Ç–∏ –¢–û–ß–ù–û –∑–Ω–∞—î—à</p>
      </div>
      <div id="wordsGrid1" class="testing-words-grid"></div>
      <div class="testing-card__header">
        <p class="testing-count">–û–±—Ä–∞–Ω–æ: <span id="selectedCount1">0</span> —Å–ª—ñ–≤</p>
        <div class="testing-buttons-group">
          <button type="button" data-action="skip-stage1" class="testing-btn testing-btn--skip">
            –ü—Ä–æ–ø—É—Å—Ç–∏—Ç–∏ ‚è≠Ô∏è
          </button>
          <button type="button" data-action="submit-stage1" class="testing-btn testing-btn--primary">
            –ü—ñ–¥—Ç–≤–µ—Ä–¥–∏—Ç–∏ ‚úì
          </button>
        </div>
      </div>
    </div>
  </div>

  <!-- Stage 2: Honest Word Selection (Second Set) -->
  <div id="stage2" class="testing-container testing-hidden">
    <div class="testing-card slide-in">
      <div class="testing-card__header">
        <div class="testing-card__emoji">‚úã</div>
        <h2 class="testing-card__title">–ü—Ä–æ–¥–æ–≤–∂—É—î–º–æ —á–µ—Å–Ω–æ!</h2>
        <p class="testing-card__subtitle">–û–±–µ—Ä–∏ –¢–Ü–õ–¨–ö–ò —Ç—ñ —Å–ª–æ–≤–∞, –ø–µ—Ä–µ–∫–ª–∞–¥ —è–∫–∏—Ö —Ç–∏ –¢–û–ß–ù–û –∑–Ω–∞—î—à</p>
      </div>
      <div id="wordsGrid2" class="testing-words-grid"></div>
      <div class="testing-card__header">
        <p class="testing-count">–û–±—Ä–∞–Ω–æ: <span id="selectedCount2">0</span> —Å–ª—ñ–≤</p>
        <div class="testing-buttons-group">
          <button type="button" data-action="skip-stage2" class="testing-btn testing-btn--skip">
            –ü—Ä–æ–ø—É—Å—Ç–∏—Ç–∏ ‚è≠Ô∏è
          </button>
          <button type="button" data-action="submit-stage2" class="testing-btn testing-btn--primary">
            –ü—ñ–¥—Ç–≤–µ—Ä–¥–∏—Ç–∏ ‚úì
          </button>
        </div>
      </div>
    </div>
  </div>

  <!-- Stage 3: Tenses Quiz -->
  <div id="quizStage" class="testing-quiz-stage testing-hidden">
    <!-- Stage Progress Bar -->
    <div class="testing-quiz-progress">
      <div id="stageProgress" class="testing-quiz-progress-fill"></div>
    </div>

    <div class="testing-quiz-info">
      <span>–ü–∏—Ç–∞–Ω–Ω—è: <span id="currentQ">1</span>/<span id="totalQ">4</span></span>
      <span>–ü—Ä–∞–≤–∏–ª—å–Ω–æ: <span id="stageScore">0</span></span>
    </div>

    <!-- Question Card -->
    <div id="questionCard" class="testing-question-card slide-in">
      <div class="testing-question-header">
        <div class="testing-question-icon">
          <span id="questionEmoji" class="testing-question-icon__emoji">‚è∞</span>
        </div>
        <div class="testing-question-content">
          <p id="questionLabel" class="testing-question-label">–û–±–µ—Ä—ñ—Ç—å –ø—Ä–∞–≤–∏–ª—å–Ω–∏–π —á–∞—Å</p>
          <p id="questionText" class="testing-question-text"></p>
        </div>
      </div>
    </div>

    <!-- Answer Cards -->
    <div id="answersGrid" class="testing-answers-grid"></div>

    <!-- Skip Button -->
    <div id="skipArea" class="testing-skip-area">
      <button type="button" data-action="skip-question" class="testing-btn testing-btn--skip-quiz">
        –ü—Ä–æ–ø—É—Å—Ç–∏—Ç–∏ ‚è≠Ô∏è
      </button>
    </div>

    <!-- Feedback -->
    <div id="feedback" class="testing-feedback testing-hidden">
      <p id="feedbackText" class="testing-feedback__text"></p>
      <p id="feedbackExplanation" class="testing-feedback__explanation"></p>
      <button type="button" data-action="next-question" class="testing-btn testing-btn--next">
        –î–∞–ª—ñ ‚Üí
      </button>
    </div>
  </div>

  <!-- Results Screen -->
  <div id="resultsScreen" class="testing-results testing-hidden">
    <div class="result-card">
      <div id="resultEmoji" class="result-card__emoji">üéØ</div>
      <h2 class="result-card__title">–†–µ–∑—É–ª—å—Ç–∞—Ç–∏ —Ç–µ—Å—Ç—É</h2>
      <p id="resultScore" class="result-card__score">0/44</p>
      <p id="resultLevel" class="result-card__level"></p>

      <div class="result-card__details">
        <h3 class="result-card__details-title">üìä –î–µ—Ç–∞–ª—å–Ω—ñ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∏:</h3>
        <div class="result-card__details-list">
          <div class="result-card__details-item">
            <span class="result-card__details-label">ü§ö –ü–µ—Ä—à–∏–π –±–ª–æ–∫ —Å–ª—ñ–≤:</span>
            <span id="res1" class="result-card__details-value">0/20</span>
          </div>
          <div class="result-card__details-item">
            <span class="result-card__details-label">‚úã –î—Ä—É–≥–∏–π –±–ª–æ–∫ —Å–ª—ñ–≤:</span>
            <span id="res2" class="result-card__details-value">0/20</span>
          </div>
          <div class="result-card__details-item">
            <span class="result-card__details-label">‚è∞ –ß–∞—Å–∏:</span>
            <span id="res3" class="result-card__details-value">0/4</span>
          </div>
        </div>
      </div>

      <div id="levelDescription" class="result-card__description"></div>

      <button type="button" data-action="restart-all" class="testing-btn testing-btn--restart">
        üîÑ –ü—Ä–æ–π—Ç–∏ —â–µ —Ä–∞–∑
      </button>
    </div>
  </div>
</div>
{% endblock %}

{% block extra_js %}
<script src="{% static 'js/modules/testing.js' %}" type="module" defer></script>
{% endblock %}
